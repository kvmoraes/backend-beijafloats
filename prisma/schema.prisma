generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id             Int           @id @default(autoincrement())
  email          String        @unique
  password       String
  name           String
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  deletedAt      DateTime?
  wallet_address String        @unique
  wallet_id      String        @unique
  recipes        recipe[]
  recipe_sales   recipe_sale[]
}

model recipe {
  id           Int           @id @default(autoincrement())
  name         String
  description  String
  ingredients  String
  price        Float
  creatorId    Int
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  deletedAt    DateTime?
  creator      User          @relation(fields: [creatorId], references: [id])
  recipe_sales recipe_sale[]

  @@index([creatorId], map: "recipe_creatorId_fkey")
}

model recipe_sale {
  id          Int       @id @default(autoincrement())
  price       Float
  nft_address String    @unique
  recipeId    Int
  buyerId     Int
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  deletedAt   DateTime?
  buyer       User      @relation(fields: [buyerId], references: [id])
  recipe      recipe    @relation(fields: [recipeId], references: [id])

  @@index([buyerId], map: "recipe_sale_buyerId_fkey")
  @@index([recipeId], map: "recipe_sale_recipeId_fkey")
}
